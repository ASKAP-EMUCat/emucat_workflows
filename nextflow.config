profiles {
   
    magnus {

    	process {
            cache = 'lenient'
            stageInMode = 'symlink'
    	}
        
        process {
        	executor = 'slurm'
        	clusterOptions = "--nodes=1 --account=ja3 --time=24:00:00"
        	queue = 'workq'

        	module = ['singularity']

        	withName: run_selavy {
            		module = ['singularity']
            		executor = 'slurm'
            		clusterOptions = '--nodes=12 --ntasks-per-node=6 --account=ja3 --time=24:00:00'
            		queue = 'workq'
        	}
	    }

        params {
            SCRATCH_ROOT = "/group/ja3/emu/"
            IMAGES = "/group/ja3/emu/images/"
        }

        workDir = "/group/ja3/emu/workdir/"
        tmpDir = "/group/ja3/emu/workdir/tmp"

        process.module = 'singularity'
        singularity {
            enabled = true
            envWhitelist = 'SINGULARITY_BINDPATH, SINGULARITYENV_LD_LIBRARY_PATH'
            cacheDir = "/group/ja3/emu/images/"	
        }

        docker.enabled = false  
    }

    
    carnaby {

        executor = 'slurm'
        queue = 'cpu'
        clusterOptions = ''

        module = ['singularity']

        withName: run_selavy {
	    executor = 'slurm'
	    clusterOptions = '--nodes=12 --ntasks-per-node=6'
	    queue = 'cpu'
            module = ['mpich', 'singularity']		
        }

        params {
            SCRATCH_ROOT = "/mnt/shared/emu/"
            IMAGES = "/mnt/shared/emu/images/"
        }

        workDir = "/mnt/shared/emu/workdir/"
        tmpDir = "/mnt/shared/emu/workdir/tmp"

        docker.enabled = false
        singularity.enabled = true
        singularity.cacheDir = "/mnt/shared/emu/images"
    }
}
